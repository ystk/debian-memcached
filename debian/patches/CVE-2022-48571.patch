From: dormando <dormando@rydia.net>
Date: Mon, 26 Oct 2020 16:29:07 -0700
Subject: [PATCH] udp: crash fix when receiving multi-packet uploads

multi-packet sets aren't supported in UDP. It was trying to write an
error message in response, but no mc_resp object was initialized at the
time, leading to a null reference crash.

Instead drop the packet quietly since that's a pretty fatal bug anyway
and keeps the parser simplified.

For credits see accompanying release notes.
---
 memcached.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/memcached.c b/memcached.c
index eee69e9..3fe36c2 100644
--- a/memcached.c
+++ b/memcached.c
@@ -3828,7 +3828,6 @@ static enum try_read_result try_read_udp(conn *c) {
 
         /* If this is a multi-packet request, drop it. */
         if (buf[4] != 0 || buf[5] != 1) {
-            out_string(c, "SERVER_ERROR multi-packet request not supported");
             return READ_NO_DATA_RECEIVED;
         }
 
